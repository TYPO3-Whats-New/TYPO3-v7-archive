% ------------------------------------------------------------------------------
% TYPO3 CMS 7.4 - What's New - Chapter "Deprecated Functions" (English Version)
%
% @author	Michael Schams <schams.net>
% @license	Creative Commons BY-NC-SA 3.0
% @link		http://typo3.org/download/release-notes/whats-new/
% @language	English
% ------------------------------------------------------------------------------
% LTXE-CHAPTER-UID:		052872e9-9f10b97b-dcf0f34b-0bb90d27
% LTXE-CHAPTER-NAME:	VEROUDERDE FUNCTIES
% ------------------------------------------------------------------------------

\section{Verouderde/Verwijderde Functies}
\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}

	\begin{center}\huge{Hoofdstuk 6:}\end{center}
	\begin{center}\huge{\color{typo3darkgrey}\textbf{Verouderde/Verwijderde Functies}}\end{center}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		f9e5ca3d-0162124b-c8dd756c-efd23d55
% LTXE-SLIDE-ORIGIN:	685b0aeb-6654ab27-f8128f62-3454735b English
% LTXE-SLIDE-ORIGIN:	ebe40c2e-32da4e43-67f18e6c-866b0496 German
% LTXE-SLIDE-TITLE:		Deprecation: #67991 - Removed EXT:cms (1)
% LTXE-SLIDE-REFERENCE:	Deprecation-67991-RemovedExtCms.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Systeemextensie \texttt{cms} verwijderd (1)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item Systeemextensie \texttt{cms} is verwijderd

		\item Extensieontwikkelaars moeten afhankelijkheden aanpassen in bestand \texttt{ext\_emconf.php}

			\begin{lstlisting}
				[...]
				'constraints' => array(
				  'depends' => array(
				    // 'cms' => ' ... ',           <= FOUT!
				    'typo3' => '7.0.0-7.99.99',
				  ),
				),
				[...]
			\end{lstlisting}

		\item De meeste functionaliteiten zijn verhuisd naar de systeemextensie \texttt{frontend}
			(wellicht moeten verwijzingen naar taalbestanden aangepast worden, zie volgende pagina)

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		5cf96b68-fad8ed7a-3ab7c9cb-398f8fcd
% LTXE-SLIDE-ORIGIN:	ff99fb62-81ad4d10-2367bc34-4985628d English
% LTXE-SLIDE-ORIGIN:	4e4332da-8e6c67f1-0496866b-ebe40c2e German
% LTXE-SLIDE-TITLE:		Deprecation: #67991 - Removed EXT:cms (2)
% LTXE-SLIDE-REFERENCE:	Deprecation-67991-RemovedExtCms.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Systeemextensie \texttt{cms} verwijderd (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item Nodige wijzigingen van referenties naar taalbestanden:

			% hint for translators:
			% please translate words "old" and "new" in listing below,
			% but DO NOT USE special characters, like German umlauts, etc.
			% (special characters inside "lstlisting" break LaTeX).

			\begin{lstlisting}
				OUD: typo3/sysext/cms/web_info/locallang.xlf
				NIEUW: typo3/sysext/frontend/Resources/Private/Language/locallang_webinfo.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/locallang_ttc.xlf
				NIEUW: typo3/sysext/frontend/Resources/Private/Language/locallang_ttc.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/locallang_tca.xlf
				NIEUW: typo3/sysext/frontend/Resources/Private/Language/locallang_tca.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/layout/locallang_db_new_content_el.xlf
				NIEUW: typo3/sysext/backend/Resources/Private/Language/locallang_db_new_content_el.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/layout/locallang.xlf
				NIEUW: typo3/sysext/backend/Resources/Private/Language/locallang_layout.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/layout/locallang_mod.xlf
				NIEUW: typo3/sysext/backend/Resources/Private/Language/locallang_mod.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/locallang_csh_webinfo.xlf
				NIEUW: typo3/sysext/frontend/Resources/Private/Language/locallang_csh_webinfo.xlf
			\end{lstlisting}
			\vspace{-0.3cm}
			\begin{lstlisting}
				OUD: typo3/sysext/cms/locallang_csh_weblayout.xlf
				NIEUW: typo3/sysext/frontend/Resources/Private/Language/locallang_csh_weblayout.xlf
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		a43a7416-ebdf6405-7205207d-8b788442
% LTXE-SLIDE-ORIGIN:	e1a896f5-538a7c07-e462c6f0-db80381c English
% LTXE-SLIDE-ORIGIN:	ae6fc887-9aeff493-158130de-3cdbf052 German
% LTXE-SLIDE-TITLE:		Deprecation: #68074 - Deprecate getPageRenderer() methods
% LTXE-SLIDE-REFERENCE:	Deprecation-68074-DeprecateGetPageRenderer.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{PageRenderer-functies verouderd}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item De volgende \texttt{PageRenderer} functies zijn aangemerkt als \textbf{verouderd}:

			\begin{lstlisting}
				TYPO3\CMS\Backend\Controller\BackendController::getPageRenderer()
				TYPO3\CMS\Backend\Template\DocumentTemplate::getPageRenderer()
				TYPO3\CMS\Backend\Template\FrontendDocumentTemplate::getPageRenderer()
				TYPO3\CMS\Frontend\Controller\TypoScriptFrontendController::getPageRenderer()
			\end{lstlisting}

		\item De volgende code haalt nu een instantie op van de PageRenderer:

			\begin{lstlisting}
				\TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance(\TYPO3\CMS\Core\Page\PageRenderer::class)
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		ae44b5a4-19759935-081bdad9-4930b883
% LTXE-SLIDE-ORIGIN:	440429fa-30e8d4b1-4784ea6f-86bc343e English
% LTXE-SLIDE-ORIGIN:	a58c2f4f-3eb806e5-d256078a-70ed73c0 German
% LTXE-SLIDE-TITLE:		Deprecation #68098 and #68122
% LTXE-SLIDE-REFERENCE:	Deprecation-68098-GeneralUtilityMethods.rst
% LTXE-SLIDE-REFERENCE:	Deprecation-68122-GeneralUtilityReadLLfile.rst
% ------------------------------------------------------------------------------
% Deprecation: #68098 - Deprecate GeneralUtility methods
% Deprecation: #68122 - Deprecate GeneralUtility::readLLfile

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Verouderde \texttt{GeneralUtility} functies}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item De volgende \texttt{GeneralUtility} functies zijn aangemerkt als \textbf{verouderd}
			en worden verwijderd in TYPO3 CMS versie 8:

			\begin{lstlisting}
				GeneralUtility::modifyHTMLColor()
				GeneralUtility::modifyHTMLColorAll()
				GeneralUtility::isBrokenEmailEnvironment()
				GeneralUtility::normalizeMailAddress()
				GeneralUtility::formatForTextarea()
				GeneralUtility::getThisUrl()
				GeneralUtility::cleanOutputBuffers()
				GeneralUtility::readLLfile()
			\end{lstlisting}

		\item Methode \texttt{readLLfile()} kan vervangen worden met de volgende code:

			\begin{lstlisting}
				/** @var $languageFactory \TYPO3\CMS\Core\Localization\LocalizationFactory */
				$languageFactory = GeneralUtility::makeInstance(
				  \TYPO3\CMS\Core\Localization\LocalizationFactory::class
				);
				$languageFactory->getParsedData($fileToParse, $language, $renderCharset, $errorMode);
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		3cc8bb43-73f4fbd8-4ccf2898-ab2bf57d
% LTXE-SLIDE-ORIGIN:	0d77c7a7-fd5da718-210555bf-80e688f0 English
% LTXE-SLIDE-ORIGIN:	b0c4d95f-d9fd698f-2d9dfdec-42aaf1af German
% LTXE-SLIDE-TITLE:		Breaking: #39721 - Prototype.js and Scriptaculous removed
% LTXE-SLIDE-REFERENCE:	Breaking-39721-PrototypejsAndScriptaculousRemoved.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{JavaScript-bibliotheken verwijderd}

	\begin{itemize}

		\item JavaScript-bibliotheken \texttt{prototype.js} en \texttt{scriptaculous} zijn verwijderd.
			Het gevolg is dat de volgende TypoScript-eigenschappen niet meer werken:

			\begin{itemize}
				\item \texttt{page.javascriptLibs.Prototype}
				\item \texttt{page.javascriptLibs.Scriptaculous.*}
			\end{itemize}

		\item De volgende attributen in ViewHelper \texttt{be.container} geven een foutmelding:
			\begin{lstlisting}
				<f:be.container loadPrototype="false" loadScriptaculous="false" scriptaculousModule="someModule,someOtherModule">
			\end{lstlisting}

		\item Als vervanging kunnen \texttt{jQuery} en \texttt{RequireJS} gebruikt worden\newline
			(deze worden al geladen in de backend)

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		05b2879c-877de2bd-cd1c254b-e9f6768d
% LTXE-SLIDE-ORIGIN:	4bb27612-517a802f-3b7a7dae-900630fc English
% LTXE-SLIDE-ORIGIN:	1375cbd0-05287ba0-3235df98-19473bf0 German
% LTXE-SLIDE-TITLE:		Deprecation: #68183 - typo3/mod.php
% LTXE-SLIDE-REFERENCE:	Deprecation-68183-Typo3modphp.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Verouderd: \texttt{init.php}, \texttt{mod.php} and \texttt{ajax.php}}

	% decrease font size for code listing
	%\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item Voor het opschonen van de map \texttt{typo3}, zijn de volgende bestanden aangemerkt
			als \textbf{verouderd}: \texttt{init.php}, \texttt{mod.php} and \texttt{ajax.php}

		\item De volgende code kan gebruikt worden als Init Entry Points:

			\begin{lstlisting}
				call_user_func(function() {
				  $classLoader = require __DIR__ . '/vendor/autoload.php';
				  (new \TYPO3\CMS\Backend\Http\Application($classLoader))->run();
				});
			\end{lstlisting}

		\item De volgende aanroep zorgt voor toegang tot \texttt{mod.php}:

			\begin{lstlisting}
				BackendUtility::getModuleUrl()
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		c42ef035-2b7b43d4-5390210c-d055d569
% LTXE-SLIDE-ORIGIN:	a09aedae-f4adde91-f6b0d3a8-ada31684 English
% LTXE-SLIDE-ORIGIN:	749d4c59-1ec6087a-45020fbd-2f7b8646 German
% LTXE-SLIDE-TITLE:		Deprecation: #67737 - TCA: Drop additional palette
% LTXE-SLIDE-REFERENCE:	Deprecation-67737-TcaDropAdditionalPalette.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{TCA: extra palet verwijderd}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item Tekst \texttt{showitem} van TCA eigenschap \texttt{types} liet ontwikkelaars extra
			paletten definiëren

		\item Dit is verwijderd en is verhuisd naar de normaal palet

		\item Before:

			\begin{lstlisting}
				'types' => array(
				  'aType' => array(
				    'showitem' => 'eenVeld;eenLabel;eenExtraPaletNaam',
				  ),
				),
			\end{lstlisting}

		\item Now:

			\begin{lstlisting}
				'types' => array(
				  'aType' => array(
				    'showitem' => 'eenVeld;eenLabel, --palette--;;eenExtraPaletNaam',
				  ),
				),
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		c0d9dc78-7b2c08ef-82ce6eb5-21cb9cc7
% LTXE-SLIDE-ORIGIN:	e27efa5c-c3999b32-6715dd2f-da8acf1f English
% LTXE-SLIDE-ORIGIN:	6398e32e-7f467ac7-463d9b47-bc0fd47c German
% LTXE-SLIDE-TITLE:		Breaking: #67577, #67646 and #67824
% LTXE-SLIDE-REFERENCE: Breaking-67577-RteEnabledFlagHandling.rst
% LTXE-SLIDE-REFERENCE: Breaking-67646-LibraryInclusionInFrontend.rst
% LTXE-SLIDE-REFERENCE: Breaking-67824-Typo3ExtFolderRemoved.rst
% ------------------------------------------------------------------------------
% Breaking: #67577 - rte_enabled and flag handling
% Breaking: #67646 - PHP library inclusion in frontend removed
% Breaking: #67824 - typo3/ext folder removed

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Diversen (1)}

	\begin{itemize}

		\item cObjecten "Text" en "Text with Images" hadden een optie "RTE ingeschakeld".
			Dit is verwijderd samen met de bijbehorende TCA-optie \texttt{flag}.

		\item De volgende TypoScript opties om PHP-bestanden in te voegen zijn verwijderd:

			\begin{itemize}
				\item \texttt{config.includeLibrary}
				\item \texttt{config.includeLibs}
			\end{itemize}

		\item Map \texttt{typo3/ext} is verwijderd\newline
			\small
				(maar niet de optie om globale extensies te gebruiken: de map moet dan zelf aangemaakt worden)
			\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		5c2e1b41-45d5c085-3cdca799-42d8a514
% LTXE-SLIDE-ORIGIN:	7b47e35b-9ae0fd9a-13d2db50-ebe93a84 English
% LTXE-SLIDE-ORIGIN:	463d9b47-bc0fd47c-6398e32e-7f467ac7 German
% LTXE-SLIDE-TITLE:		Breaking: #68001
% LTXE-SLIDE-REFERENCE: Breaking-68001-RemovedExtJSCoreAndExtJSAdapters.rst
% ------------------------------------------------------------------------------
% Breaking: #68001 - Removed ExtJS Core and ExtJS Adapters
% Breaking: #68020 - Dropped DisableBigButtons

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Diversen (2)}

	\begin{itemize}

		\item ExtCore (een losse, kleine ExtJS adapter) is verwijderd, inclusief de volgende TypoScript opties:

			\begin{itemize}
				\item \texttt{page.javascriptLibs.ExtCore.*}
				\item \texttt{page.javascriptLibs.ExtJs.*}
			\end{itemize}

			Dit geldt ook voor de optie in de \texttt{<f:be.container>} ViewHelper

		\item Zogenoemde "BigButtons" ("Pagina-eigenschappen bewerken", "Pagina verplaatsen",...) zijn verwijderd,
			inclusief hun TSconfig opties \texttt{mod.we\_layout.disableBigButtons}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		037e73d7-e7938b06-5e859701-f6e12029
% LTXE-SLIDE-ORIGIN:	8052d34e-ccc2def0-c43053a0-c3c8eba3 English
% LTXE-SLIDE-ORIGIN:	d3a774ba-c1fd32c6-099aa85f-96b6a2a2 German
% LTXE-SLIDE-TITLE:		Breaking: #68020, #68131, #65790 and #67506
% LTXE-SLIDE-REFERENCE: Breaking-68020-DroppedDisableBigButtons.rst
% LTXE-SLIDE-REFERENCE: Breaking-68131-StreamlineErrorAndExceptionHandling.rst
% LTXE-SLIDE-REFERENCE: Deprecation-65790-PagesStoragePidDeprecated.rst
% LTXE-SLIDE-REFERENCE: Deprecation-67506-DeprecateIconUtilitygetIcon.rst
% ------------------------------------------------------------------------------
% Breaking: #68131 - Streamline error and exception handling
% Deprecation: #65790 - Remove pages.storage_pid and logic
% Deprecation: #67506 - Deprecate IconUtility::getIcon

\begin{frame}[fragile]
	\frametitle{Verouderde/Verwijderde Functies}
	\framesubtitle{Diversen (3)}

	\begin{itemize}

		\item Fout- en exception-afhandeling kan niet meer in extensies geconfigureerd worden (bijv. overschreven in
			\texttt{ext\_localconf.php}), maar alleen in bestanden \texttt{LocalConfiguration.php} of
			\texttt{AdditionalConfiguration.php}

		\item Het veld "Algemene opslagpagina voor records", die de opslag PID voor een pagina bevatte, is verwijderd.
			De opslag PID moet ingesteld worden via TypoScript of het flexform.

		\item Functie \texttt{IconUtility::getIcon()} is aangemerkt als \textbf{verouderd} (gebruik
			functie \texttt{IconUtility::getSpriteIconForRecord()} in plaats daarvan)

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
