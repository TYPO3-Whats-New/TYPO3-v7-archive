% ------------------------------------------------------------------------------
% TYPO3 CMS 7.6 - What's New - Chapter "In-Depth Changes" (Greek Version)
%
% @author	Angeliki Plati <ag.plati@gmail.com>
% @license	Creative Commons BY-NC-SA 3.0
% @link		http://typo3.org/download/release-notes/whats-new/
% @language	Greek
% ------------------------------------------------------------------------------
% LTXE-CHAPTER-UID:		7229f1b9-b481e9bc-09c46183-a86b6a7e
% LTXE-CHAPTER-NAME:	In-Depth Changes
% ------------------------------------------------------------------------------

\section{\greektext Ριζικές Αλλαγές}
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}

	\begin{center}\huge{\greektext Κεφάλαιο 3:}\end{center}
	\begin{center}\huge{\color{typo3darkgrey}\textbf{\greektext Ριζικές Αλλαγές}}\end{center}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		fb7f39e9-a9c3b856-0f20d933-42501d14
% LTXE-SLIDE-ORIGIN:	159a2d7f-b679989c-30cf1736-6693f827 English
% LTXE-SLIDE-TITLE:		Bootstrap for Install Tool (1)
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\latintext Bootstrap \greektext για το \latintext Install Tool (1)}

	\begin{itemize}

		\item \greektext Το \latintext Install Tool \greektext βασίζεται τώρα στο \latintext Bootstrap - \greektext
		για το κομμάτι της εγκατάστασης:

			\latintext\begin{figure}
				\includegraphics[width=0.7\linewidth]{InDepthChanges/InstallToolBootstrap01.jpg}
			\end{figure}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		57b94677-df4363dd-e5477dbf-04d344c7
% LTXE-SLIDE-ORIGIN:	66a71f73-91b6c90e-e548a037-e2d47f94 English
% LTXE-SLIDE-TITLE:		Bootstrap for Install Tool (2)
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\latintext Bootstrap \greektext για το \latintext Install Tool (2)}

	\begin{itemize}

		\item \greektext Το \latintext Install Tool \greektext βασίζεται τώρα στο \latintext Bootstrap - \greektext για την
		 διαμόρφωση \latintext(configuration):

			\latintext\latintext\begin{figure}
				\includegraphics[width=0.7\linewidth]{InDepthChanges/InstallToolBootstrap02.png}
			\end{figure}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		5c40f730-3d75f880-2c050954-902634a3
% LTXE-SLIDE-ORIGIN:	f901074a-4080140f-dd93e505-1e8c2178 English
% LTXE-SLIDE-ORIGIN:	d5acb2d2-159a2d7f-6693f827-30cf1736 German
% LTXE-SLIDE-TITLE:		Form protection API for frontend usage
% LTXE-SLIDE-REFERENCE:	Feature-56633-FormProtectionAPIForFrontEndUsage.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Προστασία \latintext CSRF \greektext για τα \latintext Frontend Plugins}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Νέα κλάση επιτρέπει τη χρήση του \latintext FormProtection API \greektext στο \latintext frontend

		\item \greektext Αυτό υλοποιεί μία προστασία \latintext CSRF (Cross-Site Request Forgery)

			\latintext\begin{lstlisting}
				$formToken = \TYPO3\CMS\Core\FormProtection\FormProtectionFactory::get()->getFormProtection()->generateToken('news', 'edit', $uid);
				if (
				  $dataHasBeenSubmitted
				  && \TYPO3\CMS\Core\FormProtection\FormProtectionFactory::get()->validateToken(
				    \TYPO3\CMS\Core\Utility\GeneralUtility::_POST('formToken'), 'User setup', 'edit')) {
				  // processes the data
				}
				else {
				  // invalid token!
				}
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		a5c1d7d5-a793018d-2463f644-1502b46d
% LTXE-SLIDE-ORIGIN:	0198b067-68da7843-6a6d3f6d-94cee9b7 English
% LTXE-SLIDE-ORIGIN:	388c7243-b679989c-e2b30dbb-78f1aea4 German
% LTXE-SLIDE-TITLE:		Added LinkBrowser APIs (1)
% LTXE-SLIDE-REFERENCE:	Feature-66369-AddedLinkBrowserAPIs.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\latintext Tabs \greektext για τον \latintext LinkBrowser (1)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Αυτό το νέο χρακτηριστικό επιτρέπει την επέκταση του
		\latintext LinkBrowser \greektext με νέα \latintext tabs

		\item \greektext Kάθε \latintext tab \greektext είναι υπό τη διαχείριση ενός \latintext "LinkHandler", \greektext
		ο οποίος πρέπει να υλοποιεί την ακόλουθη Διεπαφή \latintext (Interface):\newline
			\latintext\small
				\texttt{\textbackslash TYPO3\textbackslash CMS\textbackslash Recordlist\textbackslash LinkHandler\textbackslash LinkHandlerInterface}
			\normalsize

		\item \greektext Οι \latintext LinkHandlers \greektext είναι εγγεγραμμένοι στο \latintext PageTSconfig \greektext ως εξής:

			\latintext\begin{lstlisting}
				file {
				  handler = TYPO3\\CMS\\Recordlist\\LinkHandler\\FileLinkHandler
				  label = LLL:EXT:lang/locallang_browse_links.xlf:file
				  displayAfter = page
				  scanAfter = page
				  configuration {
				    customConfig = passed to the handler
				  }
				}
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		e30adb51-b7f5a42f-e8d02ad3-b31f0cce
% LTXE-SLIDE-ORIGIN:	7ff322bc-2ace574c-34ddebb5-559fd90c English
% LTXE-SLIDE-ORIGIN:	dfd89b4b-7b4b816c-e5904ba8-2527339b German
% LTXE-SLIDE-TITLE:		Added LinkBrowser APIs (2)
% LTXE-SLIDE-REFERENCE:	Feature-66369-AddedLinkBrowserAPIs.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\latintext Tabs \greektext για τον \latintext (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Οι επιλογές \latintext \texttt{displayBefore} \greektext και \latintext \texttt{displayAfter}
		\greektext καθορίζουν τις θέσεις των \latintext tabs

		\item \greektext Οι επιλογές \latintext \texttt{scanBefore} \greektext και \latintext \texttt{scanAfter} \greektext
		καθορίζουν τη σειρά με την οποία οι \latintext handlers \greektext εκτελούνται όταν σαρώνονται υπάρχοντες σύνδεσμοι

			\latintext\begin{lstlisting}
				$GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['LinkBrowser']['hooks'][1444048118] = [
				  'handler' => \Vendor\Ext\MyClass::class,
				  'before' => [], // optional
				  'after' => [] // optional
				];
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		146ef043-c98a5f26-dcc6c06d-42bf0733
% LTXE-SLIDE-ORIGIN:	1ef90646-4f4342dd-3bf0112b-95acba1b English
% LTXE-SLIDE-ORIGIN:	687f24a3-032124a3-7ac41f15-26329962 German
% LTXE-SLIDE-TITLE:		Module Template API (1)
% LTXE-SLIDE-REFERENCE:	Feature-69814-ModuleTemplateAPI.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{Module Template API (1)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Ένα νέο \latintext Module Template API \greektext έχει ως στόχο την κανονικοποίηση της υλοποίησης
		των \latintext DocHeaders

		\item \greektext Παράδειγμα 1: προσθήκη ενός κουμπιού

			\latintext\begin{lstlisting}
				$openInNewWindowButton = $this->moduleTemplate->getDocHeaderComponent()->getButtonBar()
				  ->makeLinkButton()
				  ->setHref('#')
				  ->setTitle($this->getLanguageService()->sL(
				    'LLL:EXT:lang/locallang_core.xlf:labels.openInNewWindow', TRUE
				    ))
				  ->setIcon($this->iconFactory->getIcon('actions-window-open', Icon::SIZE_SMALL))
				  ->setOnClick($aOnClick);

				$this->moduleTemplate->getDocHeaderComponent()->getButtonBar()
				  ->addButton($openInNewWindowButton, ButtonBar::BUTTON_POSITION_RIGHT);
			\end{lstlisting}
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		61fbcc28-5b90c26b-1613c13c-60a90ea0
% LTXE-SLIDE-ORIGIN:	44c8e88e-5668ccb6-3cf424ea-c6a40ecf English
% LTXE-SLIDE-ORIGIN:	1570c8c9-2dfa48e9-058d2d04-bff5465d German
% LTXE-SLIDE-TITLE:		Module Template API (2)
% LTXE-SLIDE-REFERENCE:	Feature-69814-ModuleTemplateAPI.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{Module Template API (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item \greektext Παράδειγμα 2: προσθήκη ενός μενού με στοιχεία μενού

			\latintext\begin{lstlisting}
				$languageMenu = $this->moduleTemplate->getDocHeaderComponent()
				  ->getModuleMenuRegistry()->makeMenu()
				  ->setIdentifier('_langSelector')
				  ->setLabel($this->getLanguageService()->sL(
				    'LLL:EXT:lang/locallang_general.xlf:LGL.language', TRUE
				  ));

				$menuItem = $languageMenu->makeMenuItem()
				  ->setTitle($lang['title'] . $newTranslation)
				  ->setHref($href);

				if((int)$lang['uid'] === $currentLanguage) {
				  $menuItem->setActive(TRUE);
				}

				$languageMenu->addMenuItem($menuItem);
				$this->moduleTemplate->getDocHeaderComponent()->getModuleMenuRegistry()->addMenu($languageMenu);
			\end{lstlisting}
	\end{itemize}

\end{frame}


% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		168df078-18d15bd7-9a74f411-a271e50a
% LTXE-SLIDE-ORIGIN:	2ffbc623-117a44dc-923610ec-78a3afc2 English
% LTXE-SLIDE-ORIGIN:	df3ea848-d5406e98-edbd6684-485ff477 German
% LTXE-SLIDE-TITLE:		PSR-7-based Routing for Backend AJAX Requests
% LTXE-SLIDE-REFERENCE:	Feature-69916-PSR-7-basedRoutingForBackendAJAXRequests.rst
% ------------------------------------------------------------------------------

\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Δρομολόγηση \latintext PSR-7 \greektext για \latintext Backend AJAX Requests}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Για την προσθήκη μίας διαδρομής για ένα \latintext AJAX request, \greektext το αρχείο
			\latintext\texttt{Configuration/Backend/AjaxRoutes.php}\newline
			\greektext μπορεί να δημιουργηθεί με το ακόλουθο περιεχόμενο:

			\latintext\begin{lstlisting}
				return [
				  // do something
				  'unique_route_name' => [
				    'path' => '/toolcollection/some-action',
				    'target' => \Vendor\Controller\SomeController::class . '::myAction',
				  ]
				];
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		67138f5a-0623c3ab-1acbe95a-f121e37c
% LTXE-SLIDE-ORIGIN:	b68a9d26-30e6d4a0-7bccecf2-ad1f93c6 English
% LTXE-SLIDE-ORIGIN:	cb01cca6-58e91977-d18fa0b3-cba021ab German
% LTXE-SLIDE-TITLE:		Introduced two new Hooks for OpenID (getUserRecord)
% LTXE-SLIDE-REFERENCE:	Feature-44127-HooksForOpenIdToAutomaticallyCreateUserAccounts.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\latintext OpenID \greektext Άγκιστρο \latintext (Hook) \texttt{getUserRecord}}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\greektext Δύο άγκιστρα έχουν προστεθεί στο \latintext OpenID service (1/2)

		\begin{itemize}

			\item \greektext Άγκιστρο 1:\newline
				\smaller\smaller
					\latintext\texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['SC\_OPTIONS']['openid']['getUserRecord']}
				\normalsize

				\begin{itemize}
					\item \greektext Τροποποιεί την εγγραφή χρήστη αφού έχει προσκομισθεί, ή:
					\item \greektext Δημιουργεί μία νέα εγγραφή αν δε βρέθηκε καμία
					\item \greektext Οι παράμετροι \latintext\texttt{record}, \texttt{response} \greektext και \latintext \texttt{authInfo} \greektext
					«περνιούνται» στο άγκιστρο
				\end{itemize}

		\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		7854fdf6-584fdd28-988ab41d-9283e206
% LTXE-SLIDE-ORIGIN:	b9b259e4-9d35ace7-edff1014-7390d1d1 English
% LTXE-SLIDE-ORIGIN:	ea0bfed8-831666d7-1ba40bb9-7a95723a German
% LTXE-SLIDE-TITLE:		Introduced two new Hooks for OpenID (authRequest)
% LTXE-SLIDE-REFERENCE:	Feature-44127-HooksForOpenIdToAutomaticallyCreateUserAccounts.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Άγκιστρο \latintext (Hook) \texttt{authRequest}}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\greektext Δύο άγκιστρα έχουν προστεθεί στο \latintext OpenID service (2/2)

		\begin{itemize}

			\item \greektext Άγκιστρο 2:\newline
				\latintext\smaller\smaller
					\texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['SC\_OPTIONS']['openid']['authRequest']}
				\normalsize

				\begin{itemize}
					\item \greektext Τροποποιεί το \latintext Authentication Request, \greektext πριν αυτό σταλεί
					\item \greektext Μπορεί να χρησιμοποιηθεί για το \latintext request \greektext επιπρόσθετων ιδιοτήτων
					όπως ένα \latintext nickname \greektext από τον \latintext OpenID Server \greektext για παράδειγμα
					\item \greektext Οι παράμετροι \latintext \texttt{authRequest} \greektext και \latintext \texttt{authInfo}
					\greektext «περνιούνται» στο άγκιστρο
				\end{itemize}

		\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		d6cd9df0-bd81dbae-51c9a744-7f157bb5
% LTXE-SLIDE-ORIGIN:	1626edc6-8d93ff84-f64178bf-8e7650df English
% LTXE-SLIDE-ORIGIN:	115a4459-3653bb99-1680d6ab-d8c3c69b German
% LTXE-SLIDE-TITLE:		Hook in BackendUserAuthentication::getDefaultUploadFolder (1)
% LTXE-SLIDE-REFERENCE:	Feature-68895-IntroducedHookInBackendUserAuthenticationgetDefaultUploadFolder.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Άγκιστρα και Σήματα (1)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item \greektext Είναι τώρα δυνατό να αλλάξει κανείς τον φάκελο \latintext upload \greektext
		 που επιστρέφεται από την \latintext
			\texttt{BackendUserAuthentication::getDefaultUploadFolder()}

		\item \greektext Η εγγραφή του αγκίστρου στο αρχείο \latintext \texttt{ext\_localconf.php} \greektext γίνεται ως εξής:

			\latintext\begin{lstlisting}
				$GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['t3lib/class.t3lib_userauthgroup.php']
				  ['getDefaultUploadFolder'][] =
				  \Vendor\MyExtension\Hooks\DefaultUploadFolder::class . '->getDefaultUploadFolder';
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		e3b6ef85-9b24f220-ee6cb871-28d33337
% LTXE-SLIDE-ORIGIN:	9c150d50-ee3ba19b-120ef653-e714135c English
% LTXE-SLIDE-ORIGIN:	d1041967-32814ee3-2172e570-4a6d21bd German
% LTXE-SLIDE-TITLE:		Hook in BackendUserAuthentication::getDefaultUploadFolder (2)
% LTXE-SLIDE-REFERENCE:	Feature-68895-IntroducedHookInBackendUserAuthenticationgetDefaultUploadFolder.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Άγκιστρα και Σήματα (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\small \greektext Παράδειγμα:\normalsize

		\latintext\begin{lstlisting}
			<?php
			namespace Vendor\MyExtension\Hooks;
			use TYPO3\CMS\Core\Authentication\BackendUserAuthentication;
			use TYPO3\CMS\Core\Resource\Folder;

			/**
			 * Class DefaultUploadFolder
			 */
			class DefaultUploadFolder {

			  /**
			   * Get default upload folder
			   * If there is a folder present with the same name as the last part of the table name use that folder.
			   * @param array $params
			   * @param BackendUserAuthentication $backendUserAuthentication
			   * @return Folder
			   */
			   public function getDefaultUploadFolder($params, BackendUserAuthentication $backendUserAuthentication) {
			    [...]
		\end{lstlisting}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		3403e92e-1bb3a37a-b53a812c-c1b7bbdb
% LTXE-SLIDE-ORIGIN:	a4d7bec0-6c19d8b2-6a6be951-5d5aa0c0 English
% LTXE-SLIDE-ORIGIN:	2f855107-2262065c-c865f953-91b4f0ea German
% LTXE-SLIDE-TITLE:		Hook in BackendUserAuthentication::getDefaultUploadFolder (3)
% LTXE-SLIDE-REFERENCE:	Feature-68895-IntroducedHookInBackendUserAuthenticationgetDefaultUploadFolder.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Άγκιστρα και Σήματα (3)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\small \greektext Παράδειγμα (συνέχεια):\normalsize

		\latintext\begin{lstlisting}
			    [...]

			    /** @var Folder $uploadFolder */
			    $uploadFolder = $params['uploadFolder'];
			    $pid = $params['pid'];
			    $table = $params['table'];
			    $field = $params['field'];

			    $matches = [];
			    if (!empty($uploadFolder) && preg_match('/_([a-z]+)$/', $table, $matches)) {
			      $folderName = $matches[1];
			      if ($uploadFolder->hasFolder($folderName)) {
			        $uploadFolder = $uploadFolder->getSubfolder($folderName);
			      }
			    }
			    return $uploadFolder;
			  }
			}
		\end{lstlisting}

\end{frame}

% ------------------------------------------------------------------------------
% LTXE-SLIDE-START
% LTXE-SLIDE-UID:		498d8f09-18df23db-2a659e1c-cf467bca
% LTXE-SLIDE-ORIGIN:	2c656d9e-38b9be7a-d590cb6e-21eccd4d English
% LTXE-SLIDE-ORIGIN:	cd6ba83d-9f068dee-b8887ffa-4a2eff29 German
% LTXE-SLIDE-TITLE:		Diverse ?nderungen
% LTXE-SLIDE-REFERENCE:	Deprecation-69822-DeprecateSelectFieldTca.rst
% ------------------------------------------------------------------------------
\begin{frame}[fragile]
	\frametitle{\greektext Ριζικές Αλλαγές}
	\framesubtitle{\greektext Διάφορα}

	\begin{itemize}

		\item \greektext Η χρήση του τύπου πεδίου \latintext TCA \texttt{select} \greektext απαιτεί τον προσδιορισμό μίας επιλογής
		 \latintext\texttt{renderType}

		\item \greektext Έγκυρες τιμές είναι:

			\latintext\begin{lstlisting}
				'renderType' => 'selectMultipleSideBySide',
				'renderType' => 'selectCheckBox',
				'renderType' => 'selectSingle',
				'renderType' => 'selectSingleBox',
				'renderType' => 'selectTree',
			\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
